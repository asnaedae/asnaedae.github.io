<!DOCTYPE html>
<html lang="en-us">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
  <meta property="og:title" content=" java &middot;  Mike&#39;s ramblings" />
  
  <meta name="theme-color" content="#f0f0f0" />
 
  <meta property="og:site_name" content="Mike&#39;s ramblings" />
  <meta property="og:url" content="https://dubdubdub.co.uk/tags/java/" />
  
  
  <meta property="og:type" content="website" />
  

  <title>
     java &middot;  Mike&#39;s ramblings
  </title>

  <link rel="stylesheet" href="https://dubdubdub.co.uk/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://dubdubdub.co.uk/css/main.css" />
  <link rel="stylesheet" href="https://dubdubdub.co.uk/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://dubdubdub.co.uk/css/github.css" />
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400" type="text/css">
  <link rel="shortcut icon" href="https://dubdubdub.co.uk/images/favicon.ico" />
  <link rel="apple-touch-icon" href="https://dubdubdub.co.uk/images/apple-touch-icon.png" />
  
</head>
<body>
    <header class="global-header"  style="background-image:url( /images/bg.jpg )">
    <section class="header-text">
      <h1><a href="https://dubdubdub.co.uk/">Mike&#39;s ramblings</a></h1>
      
      <div class="tag-line">
        Short subtitle/tagline of your blog
      </div>
      
      <div class="sns-links hidden-print">
  
  <a href="#ZgotmplZ">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  
  
  
  
  <a href="https://github.com/asnaedae" target="_blank">
    <i class="fa fa-github"></i>
  </a>
  
  
  
  <a href="https://reddit.com/user/asnaedae" target="_blank">
    <i class="fa fa-reddit-alien"></i>
  </a>
  
  
  
  
  <a href="https://linkedin.com/in/mikewallis" target="_blank">
    <i class="fa fa-linkedin"></i>
  </a>
  
  
  <a href="https://keybase.io/asnaedae" target="_blank">
    <i class="fa fa-key"></i>
  </a>
  
</div>

      
      <a href="https://dubdubdub.co.uk/" class="btn-header btn-back hidden-xs">
        <i class="fa fa-angle-left" aria-hidden="true"></i>
        &nbsp;Home
      </a>
      
      
      <a href="https://dubdubdub.co.uk/tags/java/index.xml" class="btn-header btn-subscribe hidden-xs">
        <i class="fa fa-rss" aria-hidden="true"></i>
        &nbsp;Subscribe
      </a>
      
    </section>
  </header>
  <main class="container">

<section class="article-list">
  <h1>java</h1>
  
  <hr/>
  <article>
  <header>
    <h2><a href="https://dubdubdub.co.uk/posts/2013-06-17-http-proxy-source-ip-and-tomcat/">HTTP Proxy with source IP on Tomcat</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2013-06-17T00:00:00Z">
          Jun 17, 2013
        </time>
      </div>
    </div>
  </header>
  <div>
    Run into a situation recently where proxying applications with nginx has masked the source IP - which normally is just annoying, but with Atlassian&rsquo;s Crowd it&rsquo;s more of a problem, this can be solved in later versions (Tomcat 6.0.32+) as follows:
&lt;Valve className=&#34;org.apache.catalina.valves.RemoteIpValve&#34; internalProxies=&#34;proxy_IP_address&#34; remoteIpHeader=&#34;x-forwarded-for&#34; remoteIpProxiesHeader=&#34;x-forwarded-by&#34; protocolHeader=&#34;x-forwarded-proto&#34; /&gt; &lt;Valve className=&#34;org.apache.catalina.valves.AccessLogValve&#34; directory=&#34;logs&#34; prefix=&#34;localhost_access.&#34; suffix=&#34;.log&#34; pattern=&#34;combined&#34; resolveHosts=&#34;false&#34; /&gt; The following should be used within nginx to forward that data into tomcat.
proxy_set_header X-Forwarded-Proto https; proxy_set_header X-Forwarded-Host $host; proxy_set_header X-Forwarded-Server $host; proxy_set_header X-Forwarded-For $remote_addr; 
  </div>
  
</article>

  
  <hr/>
  <article>
  <header>
    <h2><a href="https://dubdubdub.co.uk/posts/2010-07-07-jmx-and-firewalls-or-how-to-hate-rmi-slightly-less/">jmx and firewalls</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2010-07-07T00:00:00Z">
          Jul 7, 2010
        </time>
      </div>
    </div>
  </header>
  <div>
    So at least with Java 1.6 the JVM can use SOCKS for proxying RMI requests, so to get the wonderful jvisualvm (think 1.5 visualGC) working use the following incantations. This requires the initial RMI registry port is open to the client. First the initial SSH to server enabling the SOCKS tunnel
{% highlight bash %} $ ssh -D localhost:9696 servername {% endhighlight %}
And now for jvisualvm:
{% highlight bash %} $ jvisualvm
  </div>
  
  <footer>
    <ul class="pager">
      <li class="next"><a href="https://dubdubdub.co.uk/posts/2010-07-07-jmx-and-firewalls-or-how-to-hate-rmi-slightly-less/">Read more <span aria-hidden="true">&raquo;</span></a></li>
    </ul>
  </footer>
  
</article>

  
  <hr/>
  <article>
  <header>
    <h2><a href="https://dubdubdub.co.uk/posts/2010-06-30-java-log-files/">searching java log files</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2010-06-30T00:00:00Z">
          Jun 30, 2010
        </time>
      </div>
    </div>
  </header>
  <div>
    So debugging java can be a mighty pain, a little few lines of ways to make it simpler.
# grep -m 1 -n &#39;^2010-06-30 14:20:&#39; catalina.out 11746233:2010-06-30 14:20:01,011 DEBUG com.beginning.of.line # grep -m 1 -n &#39;^2010-06-30 14:21:&#39; catalina.out 11747788:2010-06-30 14:21:00,161 WARN org.apache.commons.httpclient.HttpMethodBase - Going to buffer response body of large or unknown size. Using getResponseBodyAsStream instead is recommended # sed -n &#39;11746233,11747788p&#39; &lt; catalina.out This gives start line and end line between any two greps and then the body of the log file from those two lines.
  </div>
  
  <footer>
    <ul class="pager">
      <li class="next"><a href="https://dubdubdub.co.uk/posts/2010-06-30-java-log-files/">Read more <span aria-hidden="true">&raquo;</span></a></li>
    </ul>
  </footer>
  
</article>

  
  <hr/>
  <article>
  <header>
    <h2><a href="https://dubdubdub.co.uk/posts/2009-11-21-snow-leopard-and-the-jvm/">snow leopard and Java</a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2009-11-21T00:00:00Z">
          Nov 21, 2009
        </time>
      </div>
    </div>
  </header>
  <div>
    So in a startling case of &ldquo;Apple knows best&rdquo; they have gone and removed the 1.5 JVM - I know it&rsquo;s pretty old and people were complaining about not having a 1.6 JVM for a long time - but really!
So the following post steps you through re-enabling the 1.5 VM and now semi-happy days
  </div>
  
</article>

  
  <hr/>
  <article>
  <header>
    <h2><a href="https://dubdubdub.co.uk/posts/2006-04-01-escenic-debian-notes/"></a></h2>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2006-04-01T00:00:00Z">
          Apr 1, 2006
        </time>
      </div>
    </div>
  </header>
  <div>
    NON-FREE APT REPOSITORIES Install openssh package if not already installed
# apt-get install openssh-server Add the following to /etc/apt/sources.list:
deb http://oss.oracle.com/debian unstable main non-free deb http://ftp.uk.debian.org/debian etch main contrib non-free # apt-get update Install Async IO library for Oracle
# apt-get install libaio Install optional extras for converting the JVM to a .deb
# apt-get install build-essential fakeroot java-package # download sun binary JDK Create the ”deb” package:
$ su - escenic # fakeroot make-jpkg jdk-1_5_0_14-linux-i586.
  </div>
  
  <footer>
    <ul class="pager">
      <li class="next"><a href="https://dubdubdub.co.uk/posts/2006-04-01-escenic-debian-notes/">Read more <span aria-hidden="true">&raquo;</span></a></li>
    </ul>
  </footer>
  
</article>

  
</section>
  </main>
  <footer class="container global-footer">
    <div class="copyright-note pull-left">
      &copy; Copyright notice
    </div>
    <div class="sns-links hidden-print">
  
  <a href="#ZgotmplZ">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  
  
  
  
  <a href="https://github.com/asnaedae" target="_blank">
    <i class="fa fa-github"></i>
  </a>
  
  
  
  <a href="https://reddit.com/user/asnaedae" target="_blank">
    <i class="fa fa-reddit-alien"></i>
  </a>
  
  
  
  
  <a href="https://linkedin.com/in/mikewallis" target="_blank">
    <i class="fa fa-linkedin"></i>
  </a>
  
  
  <a href="https://keybase.io/asnaedae" target="_blank">
    <i class="fa fa-key"></i>
  </a>
  
</div>

  </footer>

  <script src="https://dubdubdub.co.uk/js/highlight.pack.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'Your Google Analytics tracking id', 'auto');
    ga('send', 'pageview');
  </script>
  
  
</body>
</html>


